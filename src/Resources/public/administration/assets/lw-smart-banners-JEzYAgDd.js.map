{"version":3,"file":"lw-smart-banners-JEzYAgDd.js","sources":["../../../app/administration/src/module/lw-smart-banners/page/lw-banner-list/lw-banner-list.html.twig","../../../app/administration/src/module/lw-smart-banners/page/lw-banner-list/index.js","../../../app/administration/src/module/lw-smart-banners/page/lw-banner-detail/lw-banner-detail.html.twig","../../../app/administration/src/module/lw-smart-banners/page/lw-banner-detail/index.js","../../../app/administration/src/module/lw-smart-banners/index.js"],"sourcesContent":["{% block lw_banner_list %}\n<sw-page class=\"lw-banner-list\">\n    {% block lw_banner_list_search_bar %}\n    <template #search-bar>\n        <sw-search-bar\n            :initial-search-type=\"$tc('lw-smart-banners.general.mainMenuItemGeneral')\"\n            :placeholder=\"$tc('lw-smart-banners.list.searchPlaceholder')\"\n            @search=\"onSearch\">\n        </sw-search-bar>\n    </template>\n    {% endblock %}\n\n    {% block lw_banner_list_smart_bar_header %}\n    <template #smart-bar-header>\n        <h2>\n            {{ $tc('lw-smart-banners.general.mainMenuItemGeneral') }}\n        </h2>\n    </template>\n    {% endblock %}\n\n    {% block lw_banner_list_smart_bar_actions %}\n    <template #smart-bar-actions>\n        {% block lw_banner_list_smart_bar_actions_add %}\n        <sw-button\n            :router-link=\"{ name: 'lw.smart.banners.create' }\"\n            variant=\"primary\">\n            {{ $tc('lw-smart-banners.list.addBanner') }}\n        </sw-button>\n        {% endblock %}\n    </template>\n    {% endblock %}\n\n    {% block lw_banner_list_content %}\n    <template #content>\n        <div class=\"lw-banner-list__content\">\n            {% block lw_banner_list_filters %}\n            <sw-container\n                class=\"lw-banner-list__filters\"\n                columns=\"repeat(auto-fit, minmax(200px, 1fr))\"\n                gap=\"0 16px\">\n                <sw-single-select\n                    :value=\"filterType\"\n                    @update:value=\"onFilterType\"\n                    :label=\"$tc('lw-smart-banners.list.filterTypeLabel')\"\n                    :options=\"filterTypeOptions\">\n                </sw-single-select>\n\n                <sw-single-select\n                    :value=\"filterActive\"\n                    @update:value=\"onFilterActive\"\n                    :label=\"$tc('lw-smart-banners.list.filterActiveLabel')\"\n                    :options=\"filterActiveOptions\">\n                </sw-single-select>\n            </sw-container>\n            {% endblock %}\n\n            {% block lw_banner_list_grid %}\n            <sw-entity-listing\n                v-if=\"banners\"\n                :items=\"banners\"\n                :repository=\"bannerRepository\"\n                :columns=\"bannerColumns\"\n                :show-selection=\"true\"\n                :is-loading=\"isLoading\"\n                :sort-by=\"sortBy\"\n                :sort-direction=\"sortDirection\"\n                @column-sort=\"onSortColumn\"\n                @page-change=\"onPageChange\"\n                @delete=\"onDelete\"\n                @inline-edit-save=\"onInlineEditSave\"\n                detail-route=\"lw.smart.banners.detail\">\n\n                {% block lw_banner_list_grid_columns %}\n                <template #column-type=\"{ item }\">\n                    <sw-label\n                        :variant=\"getTypeVariant(item.type)\"\n                        size=\"medium\">\n                        {{ item.type }}\n                    </sw-label>\n                </template>\n\n                <template #column-active=\"{ item }\">\n                    <span\n                        class=\"lw-banner-list__active-toggle\"\n                        role=\"button\"\n                        tabindex=\"0\"\n                        @click.stop=\"onToggleActive(item)\"\n                        @keydown.enter.stop=\"onToggleActive(item)\"\n                    >\n                        <sw-icon\n                            :name=\"item.active ? 'regular-checkmark-xs' : 'regular-times-s'\"\n                            :color=\"item.active ? '#37d046' : '#de294c'\"\n                            small\n                        />\n                    </span>\n                </template>\n                {% endblock %}\n\n                {% block lw_banner_list_grid_more_actions %}\n                <template #more-actions=\"{ item }\">\n                    <sw-context-menu-item @click=\"onDuplicate(item)\">\n                        {{ $tc('lw-smart-banners.list.duplicate') }}\n                    </sw-context-menu-item>\n\n                    <sw-context-menu-item @click=\"onToggleActive(item)\">\n                        {{ item.active ? $tc('lw-smart-banners.list.deactivate') : $tc('lw-smart-banners.list.activate') }}\n                    </sw-context-menu-item>\n                </template>\n                {% endblock %}\n            </sw-entity-listing>\n            {% endblock %}\n\n            {% block lw_banner_list_empty_state %}\n            <sw-empty-state\n                v-else-if=\"!isLoading\"\n                :title=\"$tc('lw-smart-banners.list.emptyStateTitle')\"\n                icon=\"regular-megaphone\">\n                <template #actions>\n                    <sw-button\n                        :router-link=\"{ name: 'lw.smart.banners.create' }\"\n                        variant=\"primary\">\n                        {{ $tc('lw-smart-banners.list.addBanner') }}\n                    </sw-button>\n                </template>\n            </sw-empty-state>\n            {% endblock %}\n        </div>\n    </template>\n    {% endblock %}\n</sw-page>\n{% endblock %}\n","import template from './lw-banner-list.html.twig';\nimport './lw-banner-list.scss';\n\nconst { Criteria } = Shopware.Data;\n\nShopware.Component.register('lw-banner-list', {\n    template,\n\n    inject: ['repositoryFactory'],\n\n    mixins: [\n        Shopware.Mixin.getByName('notification')\n    ],\n\n    data() {\n        return {\n            banners: null,\n            isLoading: false,\n            total: 0,\n            page: 1,\n            limit: 25,\n            sortBy: 'priority',\n            sortDirection: 'DESC',\n            searchTerm: '',\n            filterType: 'all',\n            filterActive: 'all'\n        };\n    },\n\n    metaInfo() {\n        return {\n            title: this.$createTitle()\n        };\n    },\n\n    computed: {\n        bannerRepository() {\n            return this.repositoryFactory.create('lw_smart_banner');\n        },\n\n        bannerColumns() {\n            return [\n                {\n                    property: 'name',\n                    dataIndex: 'name',\n                    label: this.$tc('lw-smart-banners.list.columnName'),\n                    routerLink: 'lw.smart.banners.detail',\n                    primary: true\n                },\n                {\n                    property: 'type',\n                    dataIndex: 'type',\n                    label: this.$tc('lw-smart-banners.list.columnType')\n                },\n                {\n                    property: 'priority',\n                    dataIndex: 'priority',\n                    label: this.$tc('lw-smart-banners.list.columnPriority'),\n                    align: 'right'\n                },\n                {\n                    property: 'active',\n                    dataIndex: 'active',\n                    label: this.$tc('lw-smart-banners.list.columnActive'),\n                    align: 'center'\n                }\n            ];\n        },\n\n        bannerCriteria() {\n            const criteria = new Criteria(this.page, this.limit);\n\n            if (this.searchTerm) {\n                criteria.setTerm(this.searchTerm);\n            }\n\n            if (this.sortBy) {\n                criteria.addSorting(Criteria.sort(this.sortBy, this.sortDirection));\n            }\n\n            if (this.filterType !== 'all') {\n                criteria.addFilter(Criteria.equals('type', this.filterType));\n            }\n\n            if (this.filterActive !== 'all') {\n                criteria.addFilter(Criteria.equals('active', this.filterActive === 'active'));\n            }\n\n            return criteria;\n        },\n\n        filterTypeOptions() {\n            return [\n                { value: 'all', label: this.$tc('lw-smart-banners.list.filterAllTypes') },\n                { value: 'info', label: this.$tc('lw-smart-banners.detail.typeInfo') },\n                { value: 'success', label: this.$tc('lw-smart-banners.detail.typeSuccess') },\n                { value: 'warning', label: this.$tc('lw-smart-banners.detail.typeWarning') },\n                { value: 'danger', label: this.$tc('lw-smart-banners.detail.typeDanger') }\n            ];\n        },\n\n        filterActiveOptions() {\n            return [\n                { value: 'all', label: this.$tc('lw-smart-banners.list.filterAllStatuses') },\n                { value: 'active', label: this.$tc('lw-smart-banners.list.filterActive') },\n                { value: 'inactive', label: this.$tc('lw-smart-banners.list.filterInactive') }\n            ];\n        }\n    },\n\n    created() {\n        this.loadBanners();\n    },\n\n    methods: {\n        async loadBanners() {\n            this.isLoading = true;\n\n            try {\n                const result = await this.bannerRepository.search(this.bannerCriteria);\n                this.banners = result;\n                this.total = result.total;\n            } catch (error) {\n                this.createNotificationError({\n                    message: this.$tc('lw-smart-banners.list.errorLoadingBanners')\n                });\n            } finally {\n                this.isLoading = false;\n            }\n        },\n\n        onSearch(searchTerm) {\n            this.searchTerm = searchTerm;\n            this.page = 1;\n            this.loadBanners();\n        },\n\n        onPageChange({ page, limit }) {\n            this.page = page;\n            this.limit = limit;\n            this.loadBanners();\n        },\n\n        onSortColumn(column) {\n            if (this.sortBy === column.dataIndex) {\n                this.sortDirection = this.sortDirection === 'ASC' ? 'DESC' : 'ASC';\n            } else {\n                this.sortBy = column.dataIndex;\n                this.sortDirection = 'DESC';\n            }\n            this.loadBanners();\n        },\n\n        onFilterType(type) {\n            this.filterType = type;\n            this.page = 1;\n            this.loadBanners();\n        },\n\n        onFilterActive(active) {\n            this.filterActive = active;\n            this.page = 1;\n            this.loadBanners();\n        },\n\n        async onDuplicate(item) {\n            const duplicated = this.bannerRepository.create(Shopware.Context.api);\n\n            duplicated.name = `${item.name}${this.$tc('lw-smart-banners.list.copySuffix')}`;\n            duplicated.content = item.content;\n            duplicated.type = item.type;\n            duplicated.priority = item.priority;\n            duplicated.active = item.active;\n            duplicated.cssClass = item.cssClass;\n            duplicated.ruleId = item.ruleId;\n            duplicated.activeFrom = item.activeFrom;\n            duplicated.activeTo = item.activeTo;\n\n            try {\n                await this.bannerRepository.save(duplicated);\n                this.createNotificationSuccess({\n                    message: this.$tc('lw-smart-banners.list.successDuplicate')\n                });\n\n                this.$router.push({ name: 'lw.smart.banners.detail', params: { id: duplicated.id } });\n            } catch (error) {\n                this.createNotificationError({\n                    message: this.$tc('lw-smart-banners.list.errorDuplicate')\n                });\n            }\n        },\n\n        onRefresh() {\n            this.loadBanners();\n        },\n\n        async onDelete(id) {\n            try {\n                await this.bannerRepository.delete(id);\n                this.createNotificationSuccess({\n                    message: this.$tc('lw-smart-banners.list.successDelete')\n                });\n                this.loadBanners();\n            } catch (error) {\n                this.createNotificationError({\n                    message: this.$tc('lw-smart-banners.list.errorDelete')\n                });\n            }\n        },\n\n        async onToggleActive(banner) {\n            const oldStatus = banner.active;\n            banner.active = !banner.active;\n            \n            try {\n                await this.bannerRepository.save(banner);\n                this.createNotificationSuccess({\n                    message: this.$tc('lw-smart-banners.list.successToggleActive')\n                });\n                // Reload list to refresh icons\n                await this.loadBanners();\n            } catch (error) {\n                banner.active = oldStatus;\n                this.createNotificationError({\n                    message: this.$tc('lw-smart-banners.list.errorToggleActive')\n                });\n            }\n        },\n\n        getTypeVariant(type) {\n            const variantMap = {\n                'info': 'info',\n                'success': 'success',\n                'warning': 'warning',\n                'danger': 'danger'\n            };\n            return variantMap[type] || 'neutral';\n        },\n\n        async onInlineEditSave(item) {\n            try {\n                await this.bannerRepository.save(item);\n                this.createNotificationSuccess({\n                    message: this.$tc('lw-smart-banners.list.successSave')\n                });\n            } catch (error) {\n                this.createNotificationError({\n                    message: this.$tc('lw-smart-banners.list.errorSave')\n                });\n            }\n        }\n    }\n});\n","{% block lw_banner_detail %}\n<sw-page class=\"lw-banner-detail\">\n    {% block lw_banner_detail_smart_bar_actions %}\n    <template #smart-bar-actions>\n        {% block lw_banner_detail_smart_bar_actions_cancel %}\n        <sw-button @click=\"onCancel\">\n            {{ $tc('lw-smart-banners.detail.cancel') }}\n        </sw-button>\n        {% endblock %}\n\n        {% block lw_banner_detail_smart_bar_actions_save %}\n        <sw-button\n            variant=\"primary\"\n            :is-loading=\"isLoading\"\n            :disabled=\"isSaveDisabled\"\n            @click=\"onSave\">\n            {{ $tc('lw-smart-banners.detail.save') }}\n        </sw-button>\n        {% endblock %}\n\n        {% block lw_banner_detail_smart_bar_actions_delete %}\n        <sw-button\n            v-if=\"!isCreateMode\"\n            variant=\"danger\"\n            :disabled=\"isLoading\"\n            @click=\"onDelete\">\n            {{ $tc('lw-smart-banners.detail.delete') }}\n        </sw-button>\n        {% endblock %}\n    </template>\n    {% endblock %}\n\n    {% block lw_banner_detail_content %}\n    <template #content>\n        <sw-card-view>\n            {% block lw_banner_detail_content_language_info %}\n            <sw-language-info\n                :entity-description=\"banner ? banner.name : ''\">\n            </sw-language-info>\n            {% endblock %}\n\n            {% block lw_banner_detail_base_card %}\n            <sw-card\n                :title=\"$tc('lw-smart-banners.detail.basicInfo')\"\n                :is-loading=\"isLoading\">\n                <sw-container columns=\"repeat(auto-fit, minmax(250px, 1fr))\" gap=\"0 30px\">\n                    {% block lw_banner_detail_base_content_field_name %}\n                    <sw-text-field\n                        v-model=\"banner.name\"\n                        :label=\"$tc('lw-smart-banners.detail.labelName')\"\n                        :placeholder=\"$tc('lw-smart-banners.detail.placeholderName')\"\n                        required\n                        validation=\"required\">\n                    </sw-text-field>\n                    {% endblock %}\n\n                    {% block lw_banner_detail_base_content_field_type %}\n                    <sw-single-select\n                        :value=\"banner.type\"\n                        @update:value=\"banner.type = $event\"\n                        :label=\"$tc('lw-smart-banners.detail.labelType')\"\n                        :options=\"typeOptions\"\n                        required\n                        validation=\"required\">\n                    </sw-single-select>\n                    {% endblock %}\n                </sw-container>\n\n                <sw-container columns=\"1fr\" gap=\"0 30px\">\n                    {% block lw_banner_detail_base_content_field_content %}\n                    <sw-textarea-field\n                        v-model=\"banner.content\"\n                        :label=\"$tc('lw-smart-banners.detail.labelContent')\"\n                        :placeholder=\"$tc('lw-smart-banners.detail.placeholderContent')\"\n                        required\n                        validation=\"required\">\n                    </sw-textarea-field>\n                    {% endblock %}\n                </sw-container>\n\n                <sw-container columns=\"repeat(auto-fit, minmax(250px, 1fr))\" gap=\"0 30px\">\n                    {% block lw_banner_detail_base_content_field_priority %}\n                    <sw-number-field\n                        v-model=\"banner.priority\"\n                        :label=\"$tc('lw-smart-banners.detail.labelPriority')\"\n                        :placeholder=\"$tc('lw-smart-banners.detail.placeholderPriority')\"\n                        numberType=\"int\">\n                    </sw-number-field>\n                    {% endblock %}\n\n                    {% block lw_banner_detail_base_content_field_css_class %}\n                    <sw-text-field\n                        v-model=\"banner.cssClass\"\n                        :label=\"$tc('lw-smart-banners.detail.labelCssClass')\"\n                        :placeholder=\"$tc('lw-smart-banners.detail.placeholderCssClass')\">\n                    </sw-text-field>\n                    {% endblock %}\n\n                    {% block lw_banner_detail_base_content_field_positions %}\n                    <sw-multi-select\n                        :label=\"$tc('lw-smart-banners.detail.labelPositions')\"\n                        :helpText=\"$tc('lw-smart-banners.detail.helpPositions')\"\n                        :options=\"positionOptions\"\n                        :value=\"banner.positions\"\n                        @update:value=\"banner.positions = $event\">\n                    </sw-multi-select>\n                    {% endblock %}\n\n                    {% block lw_banner_detail_base_content_field_display_mode %}\n                    <sw-single-select\n                        :value=\"banner.displayMode\"\n                        @update:value=\"banner.displayMode = $event\"\n                        :label=\"$tc('lw-smart-banners.detail.labelDisplayMode')\"\n                        :helpText=\"$tc('lw-smart-banners.detail.helpDisplayMode')\"\n                        :options=\"displayModeOptions\">\n                    </sw-single-select>\n                    {% endblock %}\n\n                    {% block lw_banner_detail_base_content_field_overlay_alignment %}\n                    <sw-single-select\n                        v-if=\"banner.displayMode === 'overlay'\"\n                        :value=\"banner.overlayAlignment\"\n                        @update:value=\"banner.overlayAlignment = $event\"\n                        :label=\"$tc('lw-smart-banners.detail.labelOverlayAlignment')\"\n                        :options=\"overlayAlignmentOptions\">\n                    </sw-single-select>\n                    {% endblock %}\n\n                    {% block lw_banner_detail_base_content_field_rule %}\n                    <sw-entity-single-select\n                        v-model:value=\"banner.ruleId\"\n                        entity=\"rule\"\n                        :criteria=\"ruleCriteria\"\n                        label-property=\"name\"\n                        :label=\"$tc('lw-smart-banners.detail.labelRule')\"\n                        :placeholder=\"$tc('lw-smart-banners.detail.placeholderRule')\"\n                        :show-clearable-button=\"true\">\n                    </sw-entity-single-select>\n                    {% endblock %}\n                </sw-container>\n\n                <sw-container columns=\"1fr\" gap=\"0 30px\">\n                    {% block lw_banner_detail_base_content_field_active %}\n                    <sw-switch-field\n                        v-model:value=\"banner.active\"\n                        :label=\"$tc('lw-smart-banners.detail.labelActive')\">\n                    </sw-switch-field>\n                    {% endblock %}\n                </sw-container>\n            </sw-card>\n            {% endblock %}\n\n            {% block lw_banner_detail_schedule_card %}\n            <sw-card\n                :title=\"$tc('lw-smart-banners.detail.schedule')\"\n                :is-loading=\"isLoading\">\n                <sw-container columns=\"repeat(auto-fit, minmax(250px, 1fr))\" gap=\"0 30px\">\n                    {% block lw_banner_detail_schedule_field_active_from %}\n                    <sw-datepicker\n                        v-model=\"banner.activeFrom\"\n                        :label=\"$tc('lw-smart-banners.detail.labelActiveFrom')\"\n                        dateType=\"datetime-local\">\n                    </sw-datepicker>\n                    {% endblock %}\n\n                    {% block lw_banner_detail_schedule_field_active_to %}\n                    <sw-datepicker\n                        v-model=\"banner.activeTo\"\n                        :label=\"$tc('lw-smart-banners.detail.labelActiveTo')\"\n                        dateType=\"datetime-local\">\n                    </sw-datepicker>\n                    {% endblock %}\n                </sw-container>\n            </sw-card>\n            {% endblock %}\n        </sw-card-view>\n    </template>\n    {% endblock %}\n\n    <sw-modal\n        v-if=\"showDeleteModal\"\n        :title=\"$tc('lw-smart-banners.detail.deleteConfirmTitle')\"\n        @modal-close=\"onCloseDeleteModal\">\n        <p>{{ $tc('lw-smart-banners.detail.deleteConfirmText') }}</p>\n\n        <template #modal-footer>\n            <sw-button @click=\"onCloseDeleteModal\">\n                {{ $tc('lw-smart-banners.detail.cancel') }}\n            </sw-button>\n\n            <sw-button\n                variant=\"danger\"\n                :is-loading=\"isLoading\"\n                @click=\"onConfirmDelete\">\n                {{ $tc('lw-smart-banners.detail.deleteConfirmButton') }}\n            </sw-button>\n        </template>\n    </sw-modal>\n</sw-page>\n{% endblock %}\n","import template from './lw-banner-detail.html.twig';\nimport './lw-banner-detail.scss';\n\nconst { Criteria } = Shopware.Data;\n\nShopware.Component.register('lw-banner-detail', {\n    template,\n\n    inject: ['repositoryFactory'],\n\n    mixins: [\n        Shopware.Mixin.getByName('notification')\n    ],\n\n    data() {\n        return {\n            banner: null,\n            isLoading: false,\n            processSuccess: false,\n            bannerId: null,\n            showDeleteModal: false\n        };\n    },\n\n    metaInfo() {\n        return {\n            title: this.$createTitle(this.identifier)\n        };\n    },\n\n    computed: {\n        bannerRepository() {\n            return this.repositoryFactory.create('lw_smart_banner');\n        },\n\n        identifier() {\n            return this.banner ? this.banner.name : '';\n        },\n\n        isCreateMode() {\n            return this.$route.name === 'lw.smart.banners.create';\n        },\n\n        typeOptions() {\n            return [\n                { value: 'info', label: this.$tc('lw-smart-banners.detail.typeInfo') },\n                { value: 'success', label: this.$tc('lw-smart-banners.detail.typeSuccess') },\n                { value: 'warning', label: this.$tc('lw-smart-banners.detail.typeWarning') },\n                { value: 'danger', label: this.$tc('lw-smart-banners.detail.typeDanger') }\n            ];\n        },\n\n        positionOptions() {\n            return [\n                { value: 'header', label: this.$tc('lw-smart-banners.detail.positionHeader') },\n                { value: 'offcanvas_cart', label: this.$tc('lw-smart-banners.detail.positionOffcanvasCart') },\n                { value: 'cart', label: this.$tc('lw-smart-banners.detail.positionCart') },\n                { value: 'checkout_confirm', label: this.$tc('lw-smart-banners.detail.positionCheckoutConfirm') },\n                { value: 'checkout_finish', label: this.$tc('lw-smart-banners.detail.positionCheckoutFinish') },\n                { value: 'pdp', label: this.$tc('lw-smart-banners.detail.positionPdp') }\n            ];\n        },\n\n        displayModeOptions() {\n            return [\n                { value: 'inline', label: this.$tc('lw-smart-banners.detail.displayModeInline') },\n                { value: 'overlay', label: this.$tc('lw-smart-banners.detail.displayModeOverlay') }\n            ];\n        },\n\n        overlayAlignmentOptions() {\n            return [\n                { value: 'top-left', label: this.$tc('lw-smart-banners.detail.overlayTopLeft') },\n                { value: 'top-center', label: this.$tc('lw-smart-banners.detail.overlayTopCenter') },\n                { value: 'top-right', label: this.$tc('lw-smart-banners.detail.overlayTopRight') },\n                { value: 'middle-left', label: this.$tc('lw-smart-banners.detail.overlayMiddleLeft') },\n                { value: 'middle-right', label: this.$tc('lw-smart-banners.detail.overlayMiddleRight') },\n                { value: 'bottom-left', label: this.$tc('lw-smart-banners.detail.overlayBottomLeft') },\n                { value: 'bottom-center', label: this.$tc('lw-smart-banners.detail.overlayBottomCenter') },\n                { value: 'bottom-right', label: this.$tc('lw-smart-banners.detail.overlayBottomRight') }\n            ];\n        },\n\n        ruleCriteria() {\n            const criteria = new Criteria(1, 25);\n            criteria.addSorting(Criteria.sort('name', 'ASC'));\n            return criteria;\n        },\n\n        isSaveDisabled() {\n            if (this.isLoading || !this.banner) {\n                return true;\n            }\n\n            return !this.banner.name || !this.banner.name.trim() || !this.banner.content || !this.banner.content.trim() || !this.banner.type;\n        }\n    },\n\n    created() {\n        this.createdComponent();\n    },\n\n    methods: {\n        createdComponent() {\n            if (this.isCreateMode) {\n                this.banner = this.bannerRepository.create();\n                this.banner.active = true;\n                this.banner.priority = 0;\n                this.banner.type = 'info';\n                this.banner.positions = [];\n                this.banner.displayMode = 'inline';\n                this.banner.overlayAlignment = 'bottom-right';\n            } else {\n                this.bannerId = this.$route.params.id;\n                this.banner = this.bannerRepository.create(Shopware.Context.api);\n                this.loadBanner();\n            }\n        },\n\n        async loadBanner() {\n            this.isLoading = true;\n\n            try {\n                this.banner = await this.bannerRepository.get(this.bannerId, Shopware.Context.api);\n\n                if (!Array.isArray(this.banner.positions)) {\n                    this.banner.positions = [];\n                }\n\n                if (!this.banner.displayMode) {\n                    this.banner.displayMode = 'inline';\n                }\n\n                if (!this.banner.overlayAlignment) {\n                    this.banner.overlayAlignment = 'bottom-right';\n                }\n            } catch (error) {\n                this.createNotificationError({\n                    message: this.$tc('lw-smart-banners.detail.errorLoadingBanner')\n                });\n            } finally {\n                this.isLoading = false;\n            }\n        },\n\n        isBannerValid() {\n            if (!this.banner) {\n                return false;\n            }\n\n            return !!(\n                this.banner.name && this.banner.name.trim() &&\n                this.banner.content && this.banner.content.trim() &&\n                this.banner.type\n            );\n        },\n\n        async onSave() {\n            if (!this.isBannerValid()) {\n                this.createNotificationError({\n                    message: this.$tc('lw-smart-banners.detail.errorValidation')\n                });\n                return;\n            }\n\n            this.isLoading = true;\n\n            try {\n                if (Array.isArray(this.banner.positions) && this.banner.positions.length === 0) {\n                    this.banner.positions = null;\n                }\n\n                if (this.banner.displayMode === 'inline') {\n                    this.banner.overlayAlignment = null;\n                }\n\n                await this.bannerRepository.save(this.banner);\n\n                this.isLoading = false;\n                this.processSuccess = true;\n\n                this.createNotificationSuccess({\n                    message: this.$tc('lw-smart-banners.detail.successSave')\n                });\n\n                if (this.isCreateMode) {\n                    this.$router.push({ name: 'lw.smart.banners.detail', params: { id: this.banner.id } });\n                } else {\n                    // Reload banner to get fresh data from server\n                    await this.loadBanner();\n                }\n            } catch (error) {\n                this.isLoading = false;\n                this.createNotificationError({\n                    message: this.$tc('lw-smart-banners.detail.errorSave')\n                });\n            }\n        },\n\n        onDelete() {\n            this.showDeleteModal = true;\n        },\n\n        onCloseDeleteModal() {\n            this.showDeleteModal = false;\n        },\n\n        async onConfirmDelete() {\n            this.isLoading = true;\n\n            try {\n                await this.bannerRepository.delete(this.banner.id);\n\n                this.createNotificationSuccess({\n                    message: this.$tc('lw-smart-banners.detail.successDelete')\n                });\n\n                this.$router.push({ name: 'lw.smart.banners.list' });\n            } catch (error) {\n                this.createNotificationError({\n                    message: this.$tc('lw-smart-banners.detail.errorDelete')\n                });\n            } finally {\n                this.isLoading = false;\n                this.showDeleteModal = false;\n            }\n        },\n\n        onCancel() {\n            this.$router.push({ name: 'lw.smart.banners.list' });\n        }\n    }\n});\n","import './page/lw-banner-list';\nimport './page/lw-banner-detail';\nimport deDE from './snippet/de-DE.json';\nimport enGB from './snippet/en-GB.json';\n\nShopware.Module.register('lw-smart-banners', {\n    type: 'plugin',\n    name: 'SmartBanners',\n    title: 'lw-smart-banners.general.mainMenuItemGeneral',\n    description: 'lw-smart-banners.general.description',\n    color: '#ff3d58',\n    icon: 'regular-megaphone',\n\n    routes: {\n        list: {\n            component: 'lw-banner-list',\n            path: 'list'\n        },\n        detail: {\n            component: 'lw-banner-detail',\n            path: 'detail/:id',\n            meta: {\n                parentPath: 'lw.smart.banners.list'\n            }\n        },\n        create: {\n            component: 'lw-banner-detail',\n            path: 'create',\n            meta: {\n                parentPath: 'lw.smart.banners.list'\n            }\n        }\n    },\n\n    navigation: [{\n        label: 'lw-smart-banners.general.mainMenuItemGeneral',\n        color: '#ff3d58',\n        path: 'lw.smart.banners.list',\n        icon: 'regular-megaphone',\n        parent: 'sw-content',\n        position: 100\n    }],\n\n    snippets: {\n        'de-DE': deDE,\n        'en-GB': enGB\n    }\n});\n"],"names":["template$1","Criteria","template","criteria","result","searchTerm","page","limit","column","type","active","item","duplicated","id","banner","oldStatus","deDE","enGB"],"mappings":"AAAA,MAAAA,EAAe,uoGCGT,UAAEC,CAAQ,EAAK,SAAS,KAE9B,SAAS,UAAU,SAAS,iBAAkB,CAC9C,SAAIC,EAEA,OAAQ,CAAC,mBAAmB,EAE5B,OAAQ,CACJ,SAAS,MAAM,UAAU,cAAc,CAC/C,EAEI,MAAO,CACH,MAAO,CACH,QAAS,KACT,UAAW,GACX,MAAO,EACP,KAAM,EACN,MAAO,GACP,OAAQ,WACR,cAAe,OACf,WAAY,GACZ,WAAY,MACZ,aAAc,KAC1B,CACA,EAEI,UAAW,CACP,MAAO,CACH,MAAO,KAAK,aAAY,CACpC,CACA,EAEI,SAAU,CACN,kBAAmB,CACf,OAAO,KAAK,kBAAkB,OAAO,iBAAiB,CAClE,EAEQ,eAAgB,CACZ,MAAO,CACH,CACI,SAAU,OACV,UAAW,OACX,MAAO,KAAK,IAAI,kCAAkC,EAClD,WAAY,0BACZ,QAAS,EAC7B,EACgB,CACI,SAAU,OACV,UAAW,OACX,MAAO,KAAK,IAAI,kCAAkC,CACtE,EACgB,CACI,SAAU,WACV,UAAW,WACX,MAAO,KAAK,IAAI,sCAAsC,EACtD,MAAO,OAC3B,EACgB,CACI,SAAU,SACV,UAAW,SACX,MAAO,KAAK,IAAI,oCAAoC,EACpD,MAAO,QAC3B,CACA,CACA,EAEQ,gBAAiB,CACb,MAAMC,EAAW,IAAIF,EAAS,KAAK,KAAM,KAAK,KAAK,EAEnD,OAAI,KAAK,YACLE,EAAS,QAAQ,KAAK,UAAU,EAGhC,KAAK,QACLA,EAAS,WAAWF,EAAS,KAAK,KAAK,OAAQ,KAAK,aAAa,CAAC,EAGlE,KAAK,aAAe,OACpBE,EAAS,UAAUF,EAAS,OAAO,OAAQ,KAAK,UAAU,CAAC,EAG3D,KAAK,eAAiB,OACtBE,EAAS,UAAUF,EAAS,OAAO,SAAU,KAAK,eAAiB,QAAQ,CAAC,EAGzEE,CACnB,EAEQ,mBAAoB,CAChB,MAAO,CACH,CAAE,MAAO,MAAO,MAAO,KAAK,IAAI,sCAAsC,CAAC,EACvE,CAAE,MAAO,OAAQ,MAAO,KAAK,IAAI,kCAAkC,CAAC,EACpE,CAAE,MAAO,UAAW,MAAO,KAAK,IAAI,qCAAqC,CAAC,EAC1E,CAAE,MAAO,UAAW,MAAO,KAAK,IAAI,qCAAqC,CAAC,EAC1E,CAAE,MAAO,SAAU,MAAO,KAAK,IAAI,oCAAoC,CAAC,CACxF,CACA,EAEQ,qBAAsB,CAClB,MAAO,CACH,CAAE,MAAO,MAAO,MAAO,KAAK,IAAI,yCAAyC,CAAC,EAC1E,CAAE,MAAO,SAAU,MAAO,KAAK,IAAI,oCAAoC,CAAC,EACxE,CAAE,MAAO,WAAY,MAAO,KAAK,IAAI,sCAAsC,CAAC,CAC5F,CACA,CACA,EAEI,SAAU,CACN,KAAK,YAAW,CACxB,EAEI,QAAS,CACL,MAAM,aAAc,CAChB,KAAK,UAAY,GAEjB,GAAI,CACA,MAAMC,EAAS,MAAM,KAAK,iBAAiB,OAAO,KAAK,cAAc,EACrE,KAAK,QAAUA,EACf,KAAK,MAAQA,EAAO,KACpC,MAA4B,CACZ,KAAK,wBAAwB,CACzB,QAAS,KAAK,IAAI,2CAA2C,CACjF,CAAiB,CACjB,QAAa,CACG,KAAK,UAAY,EACjC,CACA,EAEQ,SAASC,EAAY,CACjB,KAAK,WAAaA,EAClB,KAAK,KAAO,EACZ,KAAK,YAAW,CAC5B,EAEQ,aAAa,CAAE,KAAAC,EAAM,MAAAC,GAAS,CAC1B,KAAK,KAAOD,EACZ,KAAK,MAAQC,EACb,KAAK,YAAW,CAC5B,EAEQ,aAAaC,EAAQ,CACb,KAAK,SAAWA,EAAO,UACvB,KAAK,cAAgB,KAAK,gBAAkB,MAAQ,OAAS,OAE7D,KAAK,OAASA,EAAO,UACrB,KAAK,cAAgB,QAEzB,KAAK,YAAW,CAC5B,EAEQ,aAAaC,EAAM,CACf,KAAK,WAAaA,EAClB,KAAK,KAAO,EACZ,KAAK,YAAW,CAC5B,EAEQ,eAAeC,EAAQ,CACnB,KAAK,aAAeA,EACpB,KAAK,KAAO,EACZ,KAAK,YAAW,CAC5B,EAEQ,MAAM,YAAYC,EAAM,CACpB,MAAMC,EAAa,KAAK,iBAAiB,OAAO,SAAS,QAAQ,GAAG,EAEpEA,EAAW,KAAO,GAAGD,EAAK,IAAI,GAAG,KAAK,IAAI,kCAAkC,CAAC,GAC7EC,EAAW,QAAUD,EAAK,QAC1BC,EAAW,KAAOD,EAAK,KACvBC,EAAW,SAAWD,EAAK,SAC3BC,EAAW,OAASD,EAAK,OACzBC,EAAW,SAAWD,EAAK,SAC3BC,EAAW,OAASD,EAAK,OACzBC,EAAW,WAAaD,EAAK,WAC7BC,EAAW,SAAWD,EAAK,SAE3B,GAAI,CACA,MAAM,KAAK,iBAAiB,KAAKC,CAAU,EAC3C,KAAK,0BAA0B,CAC3B,QAAS,KAAK,IAAI,wCAAwC,CAC9E,CAAiB,EAED,KAAK,QAAQ,KAAK,CAAE,KAAM,0BAA2B,OAAQ,CAAE,GAAIA,EAAW,EAAE,CAAE,CAAE,CACpG,MAA4B,CACZ,KAAK,wBAAwB,CACzB,QAAS,KAAK,IAAI,sCAAsC,CAC5E,CAAiB,CACjB,CACA,EAEQ,WAAY,CACR,KAAK,YAAW,CAC5B,EAEQ,MAAM,SAASC,EAAI,CACf,GAAI,CACA,MAAM,KAAK,iBAAiB,OAAOA,CAAE,EACrC,KAAK,0BAA0B,CAC3B,QAAS,KAAK,IAAI,qCAAqC,CAC3E,CAAiB,EACD,KAAK,YAAW,CAChC,MAA4B,CACZ,KAAK,wBAAwB,CACzB,QAAS,KAAK,IAAI,mCAAmC,CACzE,CAAiB,CACjB,CACA,EAEQ,MAAM,eAAeC,EAAQ,CACzB,MAAMC,EAAYD,EAAO,OACzBA,EAAO,OAAS,CAACA,EAAO,OAExB,GAAI,CACA,MAAM,KAAK,iBAAiB,KAAKA,CAAM,EACvC,KAAK,0BAA0B,CAC3B,QAAS,KAAK,IAAI,2CAA2C,CACjF,CAAiB,EAED,MAAM,KAAK,YAAW,CACtC,MAA4B,CACZA,EAAO,OAASC,EAChB,KAAK,wBAAwB,CACzB,QAAS,KAAK,IAAI,yCAAyC,CAC/E,CAAiB,CACjB,CACA,EAEQ,eAAeN,EAAM,CAOjB,MANmB,CACf,KAAQ,OACR,QAAW,UACX,QAAW,UACX,OAAU,QAC1B,EAC8BA,CAAI,GAAK,SACvC,EAEQ,MAAM,iBAAiBE,EAAM,CACzB,GAAI,CACA,MAAM,KAAK,iBAAiB,KAAKA,CAAI,EACrC,KAAK,0BAA0B,CAC3B,QAAS,KAAK,IAAI,mCAAmC,CACzE,CAAiB,CACjB,MAA4B,CACZ,KAAK,wBAAwB,CACzB,QAAS,KAAK,IAAI,iCAAiC,CACvE,CAAiB,CACjB,CACA,CACA,CACA,CAAC,EC5PD,MAAAT,EAAe,u5KCGT,CAAE,SAAAD,CAAQ,EAAK,SAAS,KAE9B,SAAS,UAAU,SAAS,mBAAoB,CAC5C,SAAAC,EAEA,OAAQ,CAAC,mBAAmB,EAE5B,OAAQ,CACJ,SAAS,MAAM,UAAU,cAAc,CAC/C,EAEI,MAAO,CACH,MAAO,CACH,OAAQ,KACR,UAAW,GACX,eAAgB,GAChB,SAAU,KACV,gBAAiB,EAC7B,CACA,EAEI,UAAW,CACP,MAAO,CACH,MAAO,KAAK,aAAa,KAAK,UAAU,CACpD,CACA,EAEI,SAAU,CACN,kBAAmB,CACf,OAAO,KAAK,kBAAkB,OAAO,iBAAiB,CAClE,EAEQ,YAAa,CACT,OAAO,KAAK,OAAS,KAAK,OAAO,KAAO,EACpD,EAEQ,cAAe,CACX,OAAO,KAAK,OAAO,OAAS,yBACxC,EAEQ,aAAc,CACV,MAAO,CACH,CAAE,MAAO,OAAQ,MAAO,KAAK,IAAI,kCAAkC,CAAC,EACpE,CAAE,MAAO,UAAW,MAAO,KAAK,IAAI,qCAAqC,CAAC,EAC1E,CAAE,MAAO,UAAW,MAAO,KAAK,IAAI,qCAAqC,CAAC,EAC1E,CAAE,MAAO,SAAU,MAAO,KAAK,IAAI,oCAAoC,CAAC,CACxF,CACA,EAEQ,iBAAkB,CACd,MAAO,CACH,CAAE,MAAO,SAAU,MAAO,KAAK,IAAI,wCAAwC,CAAC,EAC5E,CAAE,MAAO,iBAAkB,MAAO,KAAK,IAAI,+CAA+C,CAAC,EAC3F,CAAE,MAAO,OAAQ,MAAO,KAAK,IAAI,sCAAsC,CAAC,EACxE,CAAE,MAAO,mBAAoB,MAAO,KAAK,IAAI,iDAAiD,CAAC,EAC/F,CAAE,MAAO,kBAAmB,MAAO,KAAK,IAAI,gDAAgD,CAAC,EAC7F,CAAE,MAAO,MAAO,MAAO,KAAK,IAAI,qCAAqC,CAAC,CACtF,CACA,EAEQ,oBAAqB,CACjB,MAAO,CACH,CAAE,MAAO,SAAU,MAAO,KAAK,IAAI,2CAA2C,CAAC,EAC/E,CAAE,MAAO,UAAW,MAAO,KAAK,IAAI,4CAA4C,CAAC,CACjG,CACA,EAEQ,yBAA0B,CACtB,MAAO,CACH,CAAE,MAAO,WAAY,MAAO,KAAK,IAAI,wCAAwC,CAAC,EAC9E,CAAE,MAAO,aAAc,MAAO,KAAK,IAAI,0CAA0C,CAAC,EAClF,CAAE,MAAO,YAAa,MAAO,KAAK,IAAI,yCAAyC,CAAC,EAChF,CAAE,MAAO,cAAe,MAAO,KAAK,IAAI,2CAA2C,CAAC,EACpF,CAAE,MAAO,eAAgB,MAAO,KAAK,IAAI,4CAA4C,CAAC,EACtF,CAAE,MAAO,cAAe,MAAO,KAAK,IAAI,2CAA2C,CAAC,EACpF,CAAE,MAAO,gBAAiB,MAAO,KAAK,IAAI,6CAA6C,CAAC,EACxF,CAAE,MAAO,eAAgB,MAAO,KAAK,IAAI,4CAA4C,CAAC,CACtG,CACA,EAEQ,cAAe,CACX,MAAMC,EAAW,IAAIF,EAAS,EAAG,EAAE,EACnC,OAAAE,EAAS,WAAWF,EAAS,KAAK,OAAQ,KAAK,CAAC,EACzCE,CACnB,EAEQ,gBAAiB,CACb,OAAI,KAAK,WAAa,CAAC,KAAK,OACjB,GAGJ,CAAC,KAAK,OAAO,MAAQ,CAAC,KAAK,OAAO,KAAK,KAAI,GAAM,CAAC,KAAK,OAAO,SAAW,CAAC,KAAK,OAAO,QAAQ,QAAU,CAAC,KAAK,OAAO,IACxI,CACA,EAEI,SAAU,CACN,KAAK,iBAAgB,CAC7B,EAEI,QAAS,CACL,kBAAmB,CACX,KAAK,cACL,KAAK,OAAS,KAAK,iBAAiB,OAAM,EAC1C,KAAK,OAAO,OAAS,GACrB,KAAK,OAAO,SAAW,EACvB,KAAK,OAAO,KAAO,OACnB,KAAK,OAAO,UAAY,CAAA,EACxB,KAAK,OAAO,YAAc,SAC1B,KAAK,OAAO,iBAAmB,iBAE/B,KAAK,SAAW,KAAK,OAAO,OAAO,GACnC,KAAK,OAAS,KAAK,iBAAiB,OAAO,SAAS,QAAQ,GAAG,EAC/D,KAAK,WAAU,EAE/B,EAEQ,MAAM,YAAa,CACf,KAAK,UAAY,GAEjB,GAAI,CACA,KAAK,OAAS,MAAM,KAAK,iBAAiB,IAAI,KAAK,SAAU,SAAS,QAAQ,GAAG,EAE5E,MAAM,QAAQ,KAAK,OAAO,SAAS,IACpC,KAAK,OAAO,UAAY,CAAA,GAGvB,KAAK,OAAO,cACb,KAAK,OAAO,YAAc,UAGzB,KAAK,OAAO,mBACb,KAAK,OAAO,iBAAmB,eAEnD,MAA4B,CACZ,KAAK,wBAAwB,CACzB,QAAS,KAAK,IAAI,4CAA4C,CAClF,CAAiB,CACjB,QAAa,CACG,KAAK,UAAY,EACjC,CACA,EAEQ,eAAgB,CACZ,OAAK,KAAK,OAIH,CAAC,EACJ,KAAK,OAAO,MAAQ,KAAK,OAAO,KAAK,KAAI,GACzC,KAAK,OAAO,SAAW,KAAK,OAAO,QAAQ,KAAI,GAC/C,KAAK,OAAO,MANL,EAQvB,EAEQ,MAAM,QAAS,CACX,GAAI,CAAC,KAAK,gBAAiB,CACvB,KAAK,wBAAwB,CACzB,QAAS,KAAK,IAAI,yCAAyC,CAC/E,CAAiB,EACD,MAChB,CAEY,KAAK,UAAY,GAEjB,GAAI,CACI,MAAM,QAAQ,KAAK,OAAO,SAAS,GAAK,KAAK,OAAO,UAAU,SAAW,IACzE,KAAK,OAAO,UAAY,MAGxB,KAAK,OAAO,cAAgB,WAC5B,KAAK,OAAO,iBAAmB,MAGnC,MAAM,KAAK,iBAAiB,KAAK,KAAK,MAAM,EAE5C,KAAK,UAAY,GACjB,KAAK,eAAiB,GAEtB,KAAK,0BAA0B,CAC3B,QAAS,KAAK,IAAI,qCAAqC,CAC3E,CAAiB,EAEG,KAAK,aACL,KAAK,QAAQ,KAAK,CAAE,KAAM,0BAA2B,OAAQ,CAAE,GAAI,KAAK,OAAO,EAAE,CAAE,CAAE,EAGrF,MAAM,KAAK,WAAU,CAEzC,MAA4B,CACZ,KAAK,UAAY,GACjB,KAAK,wBAAwB,CACzB,QAAS,KAAK,IAAI,mCAAmC,CACzE,CAAiB,CACjB,CACA,EAEQ,UAAW,CACP,KAAK,gBAAkB,EACnC,EAEQ,oBAAqB,CACjB,KAAK,gBAAkB,EACnC,EAEQ,MAAM,iBAAkB,CACpB,KAAK,UAAY,GAEjB,GAAI,CACA,MAAM,KAAK,iBAAiB,OAAO,KAAK,OAAO,EAAE,EAEjD,KAAK,0BAA0B,CAC3B,QAAS,KAAK,IAAI,uCAAuC,CAC7E,CAAiB,EAED,KAAK,QAAQ,KAAK,CAAE,KAAM,uBAAuB,CAAE,CACnE,MAA4B,CACZ,KAAK,wBAAwB,CACzB,QAAS,KAAK,IAAI,qCAAqC,CAC3E,CAAiB,CACjB,QAAa,CACG,KAAK,UAAY,GACjB,KAAK,gBAAkB,EACvC,CACA,EAEQ,UAAW,CACP,KAAK,QAAQ,KAAK,CAAE,KAAM,uBAAuB,CAAE,CAC/D,CACA,CACA,CAAC,m+KCnOD,SAAS,OAAO,SAAS,mBAAoB,CACzC,KAAM,SACN,KAAM,eACN,MAAO,+CACP,YAAa,uCACb,MAAO,UACP,KAAM,oBAEN,OAAQ,CACJ,KAAM,CACF,UAAW,iBACX,KAAM,MAClB,EACQ,OAAQ,CACJ,UAAW,mBACX,KAAM,aACN,KAAM,CACF,WAAY,uBAC5B,CACA,EACQ,OAAQ,CACJ,UAAW,mBACX,KAAM,SACN,KAAM,CACF,WAAY,uBAC5B,CACA,CACA,EAEI,WAAY,CAAC,CACT,MAAO,+CACP,MAAO,UACP,KAAM,wBACN,KAAM,oBACN,OAAQ,aACR,SAAU,GAClB,CAAK,EAED,SAAU,CACN,QAASa,EACT,QAASC,CACjB,CACA,CAAC"}