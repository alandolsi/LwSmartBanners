const r=`{% block lw_banner_list %} <sw-page class="lw-banner-list"> {% block lw_banner_list_search_bar %} <template #search-bar> <sw-search-bar :initial-search-type="$tc('lw-smart-banners.general.mainMenuItemGeneral')" :placeholder="$tc('lw-smart-banners.list.searchPlaceholder')" @search="onSearch"> </sw-search-bar> </template> {% endblock %} {% block lw_banner_list_smart_bar_header %} <template #smart-bar-header> <h2> {{ $tc('lw-smart-banners.general.mainMenuItemGeneral') }} </h2> </template> {% endblock %} {% block lw_banner_list_smart_bar_actions %} <template #smart-bar-actions> {% block lw_banner_list_smart_bar_actions_add %} <sw-button :router-link="{ name: 'lw.smart.banners.create' }" variant="primary"> {{ $tc('lw-smart-banners.list.addBanner') }} </sw-button> {% endblock %} </template> {% endblock %} {% block lw_banner_list_content %} <template #content> <div class="lw-banner-list__content"> {% block lw_banner_list_grid %} <sw-entity-listing v-if="banners" :items="banners" :repository="bannerRepository" :columns="bannerColumns" :show-selection="true" :is-loading="isLoading" :sort-by="sortBy" :sort-direction="sortDirection" @column-sort="onSortColumn" @page-change="onPageChange" @delete="onDelete" @inline-edit-save="onInlineEditSave" detail-route="lw.smart.banners.detail"> {% block lw_banner_list_grid_columns %} <template #column-type="{ item }"> <sw-label :variant="getTypeVariant(item.type)" size="medium"> {{ item.type }} </sw-label> </template> <template #column-active="{ item }"> <span class="lw-banner-list__active-toggle" role="button" tabindex="0" @click.stop="onToggleActive(item)" @keydown.enter.stop="onToggleActive(item)" > <sw-icon :name="item.active ? 'regular-checkmark-xs' : 'regular-times-s'" :color="item.active ? '#37d046' : '#de294c'" small /> </span> </template> {% endblock %} {% block lw_banner_list_grid_more_actions %} <template #more-actions="{ item }"> <sw-context-menu-item @click="onToggleActive(item)"> {{ item.active ? $tc('lw-smart-banners.list.deactivate') : $tc('lw-smart-banners.list.activate') }} </sw-context-menu-item> </template> {% endblock %} </sw-entity-listing> {% endblock %} {% block lw_banner_list_empty_state %} <sw-empty-state v-else-if="!isLoading" :title="$tc('lw-smart-banners.list.emptyStateTitle')" icon="regular-megaphone"> <template #actions> <sw-button :router-link="{ name: 'lw.smart.banners.create' }" variant="primary"> {{ $tc('lw-smart-banners.list.addBanner') }} </sw-button> </template> </sw-empty-state> {% endblock %} </div> </template> {% endblock %} </sw-page> {% endblock %}`,{Criteria:a}=Shopware.Data;Shopware.Component.register("lw-banner-list",{template:r,inject:["repositoryFactory"],mixins:[Shopware.Mixin.getByName("notification")],data(){return{banners:null,isLoading:!1,total:0,page:1,limit:25,sortBy:"priority",sortDirection:"DESC",searchTerm:"",filterType:null,filterActive:null}},metaInfo(){return{title:this.$createTitle()}},computed:{bannerRepository(){return this.repositoryFactory.create("lw_smart_banner")},bannerColumns(){return[{property:"name",dataIndex:"name",label:this.$tc("lw-smart-banners.list.columnName"),routerLink:"lw.smart.banners.detail",primary:!0},{property:"type",dataIndex:"type",label:this.$tc("lw-smart-banners.list.columnType")},{property:"priority",dataIndex:"priority",label:this.$tc("lw-smart-banners.list.columnPriority"),align:"right"},{property:"active",dataIndex:"active",label:this.$tc("lw-smart-banners.list.columnActive"),align:"center"}]},bannerCriteria(){const e=new a(this.page,this.limit);return this.searchTerm&&e.setTerm(this.searchTerm),this.sortBy&&e.addSorting(a.sort(this.sortBy,this.sortDirection)),this.filterType&&e.addFilter(a.equals("type",this.filterType)),this.filterActive!==null&&e.addFilter(a.equals("active",this.filterActive)),e}},created(){this.loadBanners()},methods:{async loadBanners(){this.isLoading=!0;try{const e=await this.bannerRepository.search(this.bannerCriteria);this.banners=e,this.total=e.total}catch{this.createNotificationError({message:this.$tc("lw-smart-banners.list.errorLoadingBanners")})}finally{this.isLoading=!1}},onSearch(e){this.searchTerm=e,this.page=1,this.loadBanners()},onPageChange({page:e,limit:t}){this.page=e,this.limit=t,this.loadBanners()},onSortColumn(e){this.sortBy===e.dataIndex?this.sortDirection=this.sortDirection==="ASC"?"DESC":"ASC":(this.sortBy=e.dataIndex,this.sortDirection="DESC"),this.loadBanners()},onFilterType(e){this.filterType=e,this.page=1,this.loadBanners()},onFilterActive(e){this.filterActive=e,this.page=1,this.loadBanners()},onRefresh(){this.loadBanners()},async onDelete(e){try{await this.bannerRepository.delete(e),this.createNotificationSuccess({message:this.$tc("lw-smart-banners.list.successDelete")}),this.loadBanners()}catch{this.createNotificationError({message:this.$tc("lw-smart-banners.list.errorDelete")})}},async onToggleActive(e){const t=e.active;e.active=!e.active;try{await this.bannerRepository.save(e),this.createNotificationSuccess({message:this.$tc("lw-smart-banners.list.successToggleActive")}),await this.loadBanners()}catch{e.active=t,this.createNotificationError({message:this.$tc("lw-smart-banners.list.errorToggleActive")})}},getTypeVariant(e){return{info:"info",success:"success",warning:"warning",danger:"danger"}[e]||"neutral"},async onInlineEditSave(e){try{await this.bannerRepository.save(e),this.createNotificationSuccess({message:this.$tc("lw-smart-banners.list.successSave")})}catch{this.createNotificationError({message:this.$tc("lw-smart-banners.list.errorSave")})}}}});const i=`{% block lw_banner_detail %} <sw-page class="lw-banner-detail"> {% block lw_banner_detail_smart_bar_actions %} <template #smart-bar-actions> {% block lw_banner_detail_smart_bar_actions_cancel %} <sw-button @click="onCancel"> {{ $tc('lw-smart-banners.detail.cancel') }} </sw-button> {% endblock %} {% block lw_banner_detail_smart_bar_actions_save %} <sw-button variant="primary" :is-loading="isLoading" @click="onSave"> {{ $tc('lw-smart-banners.detail.save') }} </sw-button> {% endblock %} </template> {% endblock %} {% block lw_banner_detail_content %} <template #content> <sw-card-view> {% block lw_banner_detail_content_language_info %} <sw-language-info :entity-description="banner ? banner.name : ''"> </sw-language-info> {% endblock %} {% block lw_banner_detail_base_card %} <sw-card :title="$tc('lw-smart-banners.detail.basicInfo')" :is-loading="isLoading"> <sw-container columns="repeat(auto-fit, minmax(250px, 1fr))" gap="0 30px"> {% block lw_banner_detail_base_content_field_name %} <sw-text-field v-model="banner.name" :label="$tc('lw-smart-banners.detail.labelName')" :placeholder="$tc('lw-smart-banners.detail.placeholderName')" required validation="required"> </sw-text-field> {% endblock %} {% block lw_banner_detail_base_content_field_type %} <sw-single-select :value="banner.type" @update:value="banner.type = $event" :label="$tc('lw-smart-banners.detail.labelType')" :options="typeOptions" required validation="required"> </sw-single-select> {% endblock %} </sw-container> <sw-container columns="1fr" gap="0 30px"> {% block lw_banner_detail_base_content_field_content %} <sw-textarea-field v-model="banner.content" :label="$tc('lw-smart-banners.detail.labelContent')" :placeholder="$tc('lw-smart-banners.detail.placeholderContent')" required validation="required"> </sw-textarea-field> {% endblock %} </sw-container> <sw-container columns="repeat(auto-fit, minmax(250px, 1fr))" gap="0 30px"> {% block lw_banner_detail_base_content_field_priority %} <sw-number-field v-model="banner.priority" :label="$tc('lw-smart-banners.detail.labelPriority')" :placeholder="$tc('lw-smart-banners.detail.placeholderPriority')" numberType="int"> </sw-number-field> {% endblock %} {% block lw_banner_detail_base_content_field_css_class %} <sw-text-field v-model="banner.cssClass" :label="$tc('lw-smart-banners.detail.labelCssClass')" :placeholder="$tc('lw-smart-banners.detail.placeholderCssClass')"> </sw-text-field> {% endblock %} {% block lw_banner_detail_base_content_field_rule %} <sw-entity-single-select v-model:value="banner.ruleId" entity="rule" :criteria="ruleCriteria" label-property="name" :label="$tc('lw-smart-banners.detail.labelRule')" :placeholder="$tc('lw-smart-banners.detail.placeholderRule')" :show-clearable-button="true"> </sw-entity-single-select> {% endblock %} </sw-container> <sw-container columns="1fr" gap="0 30px"> {% block lw_banner_detail_base_content_field_active %} <sw-switch-field v-model:value="banner.active" :label="$tc('lw-smart-banners.detail.labelActive')"> </sw-switch-field> {% endblock %} </sw-container> </sw-card> {% endblock %} {% block lw_banner_detail_schedule_card %} <sw-card :title="$tc('lw-smart-banners.detail.schedule')" :is-loading="isLoading"> <sw-container columns="repeat(auto-fit, minmax(250px, 1fr))" gap="0 30px"> {% block lw_banner_detail_schedule_field_active_from %} <sw-datepicker v-model="banner.activeFrom" :label="$tc('lw-smart-banners.detail.labelActiveFrom')" dateType="datetime-local"> </sw-datepicker> {% endblock %} {% block lw_banner_detail_schedule_field_active_to %} <sw-datepicker v-model="banner.activeTo" :label="$tc('lw-smart-banners.detail.labelActiveTo')" dateType="datetime-local"> </sw-datepicker> {% endblock %} </sw-container> </sw-card> {% endblock %} </sw-card-view> </template> {% endblock %} </sw-page> {% endblock %}`,{Criteria:n}=Shopware.Data;Shopware.Component.register("lw-banner-detail",{template:i,inject:["repositoryFactory"],mixins:[Shopware.Mixin.getByName("notification")],data(){return{banner:null,isLoading:!1,processSuccess:!1,bannerId:null}},metaInfo(){return{title:this.$createTitle(this.identifier)}},computed:{bannerRepository(){return this.repositoryFactory.create("lw_smart_banner")},identifier(){return this.banner?this.banner.name:""},isCreateMode(){return this.$route.name==="lw.smart.banners.create"},typeOptions(){return[{value:"info",label:this.$tc("lw-smart-banners.detail.typeInfo")},{value:"success",label:this.$tc("lw-smart-banners.detail.typeSuccess")},{value:"warning",label:this.$tc("lw-smart-banners.detail.typeWarning")},{value:"danger",label:this.$tc("lw-smart-banners.detail.typeDanger")}]},ruleCriteria(){const e=new n(1,25);return e.addSorting(n.sort("name","ASC")),e}},created(){this.createdComponent()},methods:{createdComponent(){this.isCreateMode?(this.banner=this.bannerRepository.create(),this.banner.active=!0,this.banner.priority=0,this.banner.type="info"):(this.bannerId=this.$route.params.id,this.loadBanner())},async loadBanner(){this.isLoading=!0;try{this.banner=await this.bannerRepository.get(this.bannerId,Shopware.Context.api)}catch{this.createNotificationError({message:this.$tc("lw-smart-banners.detail.errorLoadingBanner")})}finally{this.isLoading=!1}},async onSave(){this.isLoading=!0;try{await this.bannerRepository.save(this.banner),this.isLoading=!1,this.processSuccess=!0,this.createNotificationSuccess({message:this.$tc("lw-smart-banners.detail.successSave")}),this.isCreateMode?this.$router.push({name:"lw.smart.banners.detail",params:{id:this.banner.id}}):await this.loadBanner()}catch{this.isLoading=!1,this.createNotificationError({message:this.$tc("lw-smart-banners.detail.errorSave")})}},onCancel(){this.$router.push({name:"lw.smart.banners.list"})}}});const s={"lw-smart-banners":{general:{mainMenuItemGeneral:"Smart Banners",description:"Verwalte deine Smart Banners"},list:{columnName:"Name",columnType:"Typ",columnPriority:"Priorität",columnActive:"Aktiv",columnActiveFrom:"Aktiv von",columnActiveTo:"Aktiv bis",searchPlaceholder:"Banner durchsuchen...",addBanner:"Banner hinzufügen",emptyStateTitle:"Noch keine Banner vorhanden",activate:"Aktivieren",deactivate:"Deaktivieren",successDelete:"Banner erfolgreich gelöscht",errorDelete:"Fehler beim Löschen des Banners",successToggleActive:"Status erfolgreich geändert",errorToggleActive:"Fehler beim Ändern des Status",errorLoadingBanners:"Fehler beim Laden der Banner",successSave:"Banner erfolgreich gespeichert",errorSave:"Fehler beim Speichern des Banners"},detail:{basicInfo:"Grundinformationen",schedule:"Zeitplanung",labelName:"Name",placeholderName:"Banner-Name eingeben",labelContent:"Inhalt",placeholderContent:"Banner-Inhalt eingeben",labelType:"Typ",typeInfo:"Information",typeSuccess:"Erfolg",typeWarning:"Warnung",typeDanger:"Fehler",labelPriority:"Priorität",placeholderPriority:"0",labelCssClass:"CSS-Klasse",placeholderCssClass:"Optionale CSS-Klasse",labelRule:"Regel",placeholderRule:"Regel auswählen (optional)",labelActive:"Aktiv",labelActiveFrom:"Aktiv von",labelActiveTo:"Aktiv bis",save:"Speichern",cancel:"Abbrechen",successSave:"Banner erfolgreich gespeichert",errorSave:"Fehler beim Speichern des Banners",errorLoadingBanner:"Fehler beim Laden des Banners"}}},l={"lw-smart-banners":{general:{mainMenuItemGeneral:"Smart Banners",description:"Manage your Smart Banners"},list:{columnName:"Name",columnType:"Type",columnPriority:"Priority",columnActive:"Active",columnActiveFrom:"Active from",columnActiveTo:"Active to",searchPlaceholder:"Search banners...",addBanner:"Add banner",emptyStateTitle:"No banners yet",activate:"Activate",deactivate:"Deactivate",successDelete:"Banner deleted successfully",errorDelete:"Error deleting banner",successToggleActive:"Status changed successfully",errorToggleActive:"Error changing status",errorLoadingBanners:"Error loading banners",successSave:"Banner saved successfully",errorSave:"Error saving banner"},detail:{basicInfo:"Basic information",schedule:"Schedule",labelName:"Name",placeholderName:"Enter banner name",labelContent:"Content",placeholderContent:"Enter banner content",labelType:"Type",typeInfo:"Information",typeSuccess:"Success",typeWarning:"Warning",typeDanger:"Danger",labelPriority:"Priority",placeholderPriority:"0",labelCssClass:"CSS class",placeholderCssClass:"Optional CSS class",labelRule:"Rule",placeholderRule:"Select rule (optional)",labelActive:"Active",labelActiveFrom:"Active from",labelActiveTo:"Active to",save:"Save",cancel:"Cancel",successSave:"Banner saved successfully",errorSave:"Error saving banner",errorLoadingBanner:"Error loading banner"}}};Shopware.Module.register("lw-smart-banners",{type:"plugin",name:"SmartBanners",title:"lw-smart-banners.general.mainMenuItemGeneral",description:"lw-smart-banners.general.description",color:"#ff3d58",icon:"regular-megaphone",routes:{list:{component:"lw-banner-list",path:"list"},detail:{component:"lw-banner-detail",path:"detail/:id",meta:{parentPath:"lw.smart.banners.list"}},create:{component:"lw-banner-detail",path:"create",meta:{parentPath:"lw.smart.banners.list"}}},navigation:[{label:"lw-smart-banners.general.mainMenuItemGeneral",color:"#ff3d58",path:"lw.smart.banners.list",icon:"regular-megaphone",parent:"sw-content",position:100}],snippets:{"de-DE":s,"en-GB":l}});
//# sourceMappingURL=lw-smart-banners-DJMgE9k7.js.map
